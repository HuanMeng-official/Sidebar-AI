# Sidebar AI

> 一个 Chrome Manifest V3 扩展，在浏览器侧边栏提供 AI 聊天界面，支持可自定义的 API 端点、模型和 APPLE UI 设计。

[English Version](README.md) | [中文版本](README.zh-CN.md)

## 功能特性

```
项目结构/
├── manifest.json
├── background.js
├── sidebar.html
├── sidebar.css
├── sidebar.js
├── icons/
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
├── _locales/
│   ├── en/
│   │   └── messages.json
│   └── zh_CN/
│       └── messages.json
```

### 核心功能
- **侧边栏集成**: 使用 Manifest V3 Side Panel API 实现的原生 Chrome 侧边栏
- **AI 聊天界面**: 实时对话 AI 交互，支持流式响应
- **多语言支持**: 完整的国际化 (i18n) 支持，包含英语、中文
- **持久化存储**: 对话历史管理，支持本地存储持久化

### API 配置
- **自定义 API 端点**: 可配置的 REST API 端点，支持 OpenAI 兼容服务
- **模型选择**: 灵活的模型指定，支持多种 LLM 架构
- **认证管理**: 安全的 API 密钥存储和管理
- **温度控制**: 可调节的响应创意参数 (0.0-1.0 范围)

### 对话管理
- **会话历史**: 活动会话中的持久对话上下文
- **聊天历史**: 完整的历史对话存档，包含时间戳元数据
- **对话切换**: 多个聊天上下文之间的无缝切换
- **选择性删除**: 细粒度的对话历史管理，支持单个记录删除

### UI/UX 设计
- **响应式布局**: 自适应设计，优化各种视口尺寸
- **深色模式支持**: 自动系统偏好检测，支持动态主题切换
- **微交互**: 使用 cubic-bezier 时序函数的微妙动画和过渡
- **无障碍合规**: WCAG 兼容的对比度和语义化 HTML 结构

## 技术架构

### Manifest V3 实现
- **Service Worker**: 用于扩展生命周期管理的后台脚本
- **Side Panel API**: 独立的侧边栏界面，具有隔离的执行上下文
- **Storage API**: 同步设置和异步对话数据持久化
- **主机权限**: 安全的跨域资源访问，具有明确的域声明

### 安全考虑
- **凭据隔离**: API 密钥存储在加密的 Chrome 存储机制中
- **内容安全策略**: 严格的 CSP 实现，防止 XSS 漏洞
- **输入清理**: 用户生成内容渲染的 HTML 实体编码
- **速率限制**: 客户端请求节流，防止 API 滥用

### 性能优化
- **懒加载**: 基于用户交互模式的条件资源加载
- **内存管理**: 高效的垃圾回收和对话数据修剪
- **事件委托**: 优化的事件处理，防止事件冒泡
- **虚拟滚动**: 针对大量对话历史的高效 DOM 渲染

## 安装

### 开发设置
1. 将仓库克隆到本地开发环境
2. 在基于 Chromium 的浏览器中导航到 `chrome://extensions/`
3. 启用"开发者模式"切换
4. 选择"加载已解压的扩展程序"并选择扩展目录
5. 将扩展固定到工具栏以便快速访问

### 配置要求
- **API 端点**: 有效的聊天完成服务 REST 端点 URL
- **认证令牌**: API 服务认证的 Bearer 令牌
- **模型标识符**: 与配置端点兼容的有效模型名称

## 使用指南

### 基本操作
1. **发起聊天**: 点击扩展图标打开侧边栏界面
2. **配置设置**: 通过齿轮图标访问设置面板进行 API 配置
3. **开始对话**: 在输入框中输入消息并按发送或 Enter 键
4. **管理会话**: 使用新建聊天按钮创建新的对话上下文

### 高级功能
- **历史导航**: 通过历史面板访问之前的对话
- **上下文切换**: 加载历史对话以继续交互
- **选择性清理**: 从历史存档中删除单个对话
- **主题适配**: 基于系统偏好的自动深色/浅色模式切换

## 本地化支持

### 支持的语言
- **英语 (en)**: 主要语言，完整功能覆盖
- **简体中文 (zh_CN)**: 完整的普通话本地化

### 翻译框架
- **消息包**: 基于 JSON 的 i18n 消息目录
- **动态本地化**: 运行时语言检测和切换
- **回退机制**: 优雅降级到默认语言

## 浏览器兼容性

### 支持的平台
- **Google Chrome**: 版本 114+，支持 Manifest V3
- **Microsoft Edge**: 基于 Chromium 的版本，支持侧边栏功能
- **Brave Browser**: Manifest V3 兼容的实现
- **Opera**: 支持扩展的 Chromium 引擎版本

### 系统要求
- **操作系统**: Windows 10+, macOS 10.15+, 带有 GTK 的 Linux 发行版
- **内存**: 推荐至少 4GB RAM 以获得最佳性能
- **存储**: 50MB 可用磁盘空间用于扩展和缓存数据

## 隐私和数据处理

### 数据收集政策
- **零跟踪**: 无用户行为监控或分析收集
- **本地处理**: 所有对话数据在浏览器上下文中处理
- **无外部依赖**: 自包含功能，无需第三方服务
- **透明操作**: 清晰的数据流和明确的用户同意机制

### 存储管理
- **设置持久化**: Chrome 同步存储用于跨设备配置
- **对话归档**: 本地存储，具有自动数据保留策略
- **缓存优化**: 高效的内存利用和自动清理例程

## 开发路线图

### 计划中的增强功能
- **多模型支持**: 同时与多个 AI 服务交互
- **导出功能**: 标准格式的对话数据序列化
- **高级提示**: 基于模板的提示工程能力
- **语音集成**: 语音转文本和文本转语音功能

### 技术改进
- **WebAssembly 集成**: 客户端处理的性能优化
- **渐进式增强**: 服务工作者缓存的离线功能
- **无障碍审计**: WCAG 2.1 AA 合规性验证
- **性能监控**: 实时指标收集和优化

## 贡献

### 开发工作流
1. Fork 仓库并创建功能分支
2. 按照既定的编码标准实施更改
3. 在支持的平台上执行全面测试
4. 提交包含详细变更文档的拉取请求

### 代码标准
- **ES6+ 语法**: 现代 JavaScript，使用 async/await 模式
- **CSS 架构**: BEM 方法论和自定义属性主题
- **安全实践**: 输入验证和输出编码协议
- **性能指标**: Lighthouse 分数和 Core Web Vitals 合规性

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

## 支持

如需技术协助和功能请求，请通过 GitHub 仓库的问题跟踪器提交问题。欢迎通过拉取请求和讨论进行社区贡献和反馈。